rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Allow any authenticated user to read and write any user document
    // This enables cross-device sync where multiple devices share the same User ID
    match /users/{userId} {
      allow read, write: if request.auth != null;
    }

    // Allow authenticated users to read and write short codes
    // Short codes map to user IDs for easier cross-device sharing
    match /shortCodes/{shortCode} {
      allow read, write: if request.auth != null;
    }
  }
}